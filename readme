■ 环境
D:\99_wk\pythondev\myenv\Scripts\activate.bat


■ 安装DB
python manage.py makemigrations bkapp
python manage.py migrate
python manage.py createsuperuser

■ 安装
pip install Django
pip install djangorestframework
pip install djangorestframework-simplejwt
pip install redis django-redis
pip install celery
pip install akshare

pip install django-cors-headers

■ 运行
celery -A unisv worker -l INFO
celery -A unisv beat -l INFO
python manage.py runserver

http://127.0.0.1:8000/admin/


redis-server

■API 
https://momaapi.com/docs-shares.html
历史数据
http://api.momaapi.com/hsstock/history/000001.SZ/d/n/34E1BB45-2D59-4761-AB47-CEBC7A676A57?st=20240601&et=20251209&lt=300
实时数据
http://api.momaapi.com/hsstock/real/time/000001/34E1BB45-2D59-4761-AB47-CEBC7A676A57

http://api.momaapi.com/hsrl/ssjy_more/34E1BB45-2D59-4761-AB47-CEBC7A676A57?stock_codes=000001,000002






■AI策略提示

我想写一个方法def backtest(self, history):。
参数history是下面这样，日期后面的四个数字分别是股票的开盘价，最高价，最低价，收盘价。
数据是股票一年的历史数据。这里作为例子只写了几条。
[["2013/1/24", 2320.26, 2320.26, 2287.3, 2362.94],
      ["2013/1/25", 2300, 2291.3, 2288.26, 2308.38],
      ["2013/1/28", 2295.35, 2346.5, 2295.35, 2346.92],
      ["2013/1/29", 2347.22, 2358.98, 2337.35, 2363.8],
      ["2013/1/30", 2360.75, 2382.48, 2347.89, 2383.76],
      ["2013/1/31", 2383.43, 2385.42, 2371.23, 2391.82],
      ["2013/2/1", 2377.41, 2419.02, 2369.57, 2421.15],
      ["2013/2/4", 2425.92, 2428.15, 2417.58, 2440.38]]

返回结果，我想得到下面格式的结果。
historyList是模拟的买入卖出情况。
markPoint是在k线图上，需要标记的买卖点位。

{
  "code": 0,
  "message": "success",
  "data": {
    "historyList":[
      {
        "buyDate":"2025/01/01",
        "buyPrice":12.10,
        "sellDate":"2025/01/01",
        "sellPrice":12.60,
        "warehousePosition":0.25,
        "profitMargin":"0.0312"
      },
      {
        "buyDate":"2025/02/01",
        "buyPrice":12.10,
        "sellDate":"2025/02/01",
        "sellPrice":12.60,
        "warehousePosition":0.35,
        "profitMargin":"0.2326"
      },
      {
        "buyDate":"2025/01/01",
        "buyPrice":12.10,
        "sellDate":"2025/01/01",
        "sellPrice":12.60,
        "warehousePosition":0.25,
        "profitMargin":"0.0312"
      }
    ],
    "markPoint": {
      "data": [
        {
          "name": "Mark",
          "coord": ["2013/5/31", 2300],
          "value": 2300,
          "itemStyle": {
            "color": "rgb(41,60,85)"
          },
          "symbolSize": 60
        }
      ]
    }
  }
}

回测的处理过程。
你考虑一个均线交易策略。更具历史数据，计算均线，然后更具策略，算出模拟交易的返回结果。
另外需要考虑，模拟时每次建仓的百分比。可以是全仓，也可以是分仓，更具你的经验来自行考虑。